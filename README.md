## Swiftcloud
SwiftCloud: a causally-consistent CRDT object database for client-side apps

This repository contains the prototype database SwiftCloud, originally
described in the Inria tech report "SwiftCloud: Fault-Tolerant
Geo-Replication Integrated all the Way to the Client Machine" by
Marek Zawirski, Annette Bieniusa, Valter Balegas, Sérgio Duarte,
Carlos Baquero, Marc Shapiro, and Nuno Preguiça
(http://hal.inria.fr/hal-00870225), with an updated description appearing in
a PhD thesis of Marek Zawirski on "Dependable Eventual Consistency
with Replicated Data Types"
(http://pagesperso-systeme.lip6.fr/Marek.Zawirski/papers/thesis.pdf).
This codebase served in the experiments for the latter.

The code is licensed under The Apache License Version 2.0 (LICENSE),
provided in the spirit of CRAPL license (CRAPL-LICENSE), i.e., it is ugly
to read/use and far from production ready.   

### SwiftCloud crash course
TODO

### Example applications
- SwiftSocial - a simple social network application modeled after WaltSocial
- Port of YCSB benchmark
- File system with FUSE bindings

### Running scripts
Deployment scripts for experiments are implemented in Groovy.
The scripts are in scripts/groovy/deployment directory, both deployment classes
definitions (such as SwiftBase.groovy, SwiftSocial2.groovy etc.) and concrete
experiment instances (runsocialmanual.groovy etc.).

To run the scripts, you need:
-  groovy and ant installed on your machine, and
-  bin/ directory with compiled sources (e.g., generated by Eclipse by default)
-  ssh access configured for the target machine.
In the case of EC2 machines used in experiments, the simplest is to configure
your ssh like this:

```
Host *.compute.amazonaws.com
	StrictHostKeyChecking no
	UserKnownHostsFile=/dev/null
	IdentityFile PATH_TO_SSH_KEY_GOES_HERE

Host *.compute-1.amazonaws.com
	StrictHostKeyChecking no
	UserKnownHostsFile=/dev/null
	IdentityFile PATH_TO_SSH_KEY_GOES_HERE
```

To run experiments, use scripts from scripts/groovy/swift/deployment
E.g. to run a single swiftsocial experiment manually:

```
./scripts/groovy/swift/deployment/runsocialmanual.groovy
```

(TODO: edit that example to modify SwiftSocial2 parameters)

E.g. to run a series of experiments oriented at scalability:

```
./scripts/groovy/swift/deployment/runscalabilitythroughput.groovy
```

The experiments generate log files. To generate plots from the logs, use scripts from eval_R/.
e.g. to generate a detailed analysis of a run:

```
Rscript eval_R/analyze_run.R all <run_logs.tar.gz> [output directory]
```

e.g. to compare different runs use eval_R/compare_runs.R and associated Makefiles.